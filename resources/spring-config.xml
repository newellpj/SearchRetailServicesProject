<?xml version="1.0" encoding="UTF-8" ?>
 
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd">

<!-- let Spring do its IoC stuff in this package -->
<context:component-scan base-package="co.srsp.activemq.server"/>

<!-- declare a camel context that scans for classes that is RouteBuilder
     in the package org.apache.camel.example.server -->
<camel:camelContext id="camel-server">
  <camel:package>co.srsp.activemq.server</camel:package>
  <!-- enable JMX connector so we can connect to the server and browse mbeans -->
  <!-- Camel will log at INFO level the service URI to use for connecting with jconsole -->
  <camel:jmxAgent id="agent" createConnector="true"/>
</camel:camelContext>

<!-- lets configure the ActiveMQ JMS broker server -->
<broker:broker useJmx="true" persistent="false" brokerName="myBroker">
  <broker:transportConnectors>
    <!-- expose a VM transport for in-JVM transport between AMQ and Camel on the server side -->
    <broker:transportConnector name="vm" uri="vm://myBroker"/>
    <!-- expose a TCP transport for clients to use -->
    <broker:transportConnector name="tcp" uri="tcp://localhost:${tcp.port}"/>
  </broker:transportConnectors>
</broker:broker>

<!-- lets configure the Camel ActiveMQ to use the embedded ActiveMQ broker declared above -->
<bean id="jms" class="org.apache.activemq.camel.component.ActiveMQComponent">
  <property name="connectionFactory">
    <bean class="org.apache.activemq.spring.ActiveMQConnectionFactory">
      <property name="brokerURL" value="vm://myBroker"/>
      <property name="trustAllPackages" value="true"/>
    </bean>
  </property>
</bean>

</beans>